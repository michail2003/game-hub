<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* Add a delay when hiding the genres box */
    /* Make sure parent <li> is relative to position dropdown */
    .relative {
      position: relative;
    }

    /* Dropdown styling */
    .genres-box {
      position: absolute;
      left: 50%;
      top: 100%;
      /* right below the parent */
      transform: translateX(-50%) translateY(-10px);
      margin-top: 0.5rem;
      /* mt-2 in Tailwind */
      background-color: white;
      color: black;
      border-radius: 0.5rem;
      /* rounded */
      box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1),
        0 4px 6px -2px rgba(0, 0, 0, 0.05);
      /* shadow-lg */
      padding: 1rem;
      /* p-4 */
      min-width: 10rem;
      /* min-w-40 */
      z-index: 20;
      opacity: 0;
      pointer-events: none;
      visibility: hidden;
      transition:
        opacity 0.3s ease,
        transform 0.3s ease,
        visibility 0.3s ease;
      display: flex;
      flex-direction: column;
    }

    /* Show dropdown on hover or focus */
    .group:hover .genres-box,
    .group:focus-within .genres-box {
      opacity: 1;
      pointer-events: auto;
      visibility: visible;
      transform: translateX(-50%) translateY(0);
    }

    /* List item styles */
    .genres-box ul {
      margin: 0;
      padding: 0;
      list-style: none;
    }

    .genres-box li {
      padding: 0.25rem 0.5rem;
      /* py-1 px-2 */
      color: #4a5568;
      /* Tailwind text-gray-700 */
      border-radius: 0.25rem;
      /* rounded */
      transition: background-color 0.2s ease;
    }

    .genres-box li:hover {
      background-color: #e2e8f0;
      /* Tailwind bg-gray-200 */
    }

    .genres-box a {
      display: block;
      width: 100%;
      height: 100%;
      color: inherit;
      text-decoration: none;
    }
  </style>
</head>

<body>

  <nav class="bg-gray-800 text-white">
    <ul class="flex p-4 justify-evenly gap-4 items-center">
      <li><a href="{% url 'home' %}">
          <h1 class="text-4xl font-bold">Game hub</h1>
        </a></li>

      <li class="relative group">
        <a href="#" class="flex items-center gap-2">
          <svg xmlns="http://www.w3.org/2000/svg" height="20" width="20" viewBox="0 0 512 512" fill="white">
            <path
              d="M40 48C26.7 48 16 58.7 16 72l0 48c0 13.3 10.7 24 24 24l48 0c13.3 0 24-10.7 24-24l0-48c0-13.3-10.7-24-24-24L40 48zM192 64c-17.7 0-32 14.3-32 32s14.3 32 32 32l288 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L192 64zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l288 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-288 0zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l288 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-288 0zM16 232l0 48c0 13.3 10.7 24 24 24l48 0c13.3 0 24-10.7 24-24l0-48c0-13.3-10.7-24-24-24l-48 0c-13.3 0-24 10.7-24 24zM40 368c-13.3 0-24 10.7-24 24l0 48c0 13.3 10.7 24 24 24l48 0c13.3 0 24-10.7 24-24l0-48c0-13.3-10.7-24-24-24l-48 0z" />
          </svg>
          Genres
        </a>

        <div class="genres-box">
          <ul>
            {% for genre in genres %}
            <li><a href="http://127.0.0.1:8000/?genre={{ genre }}">{{ genre }}</a></li>
            {% endfor %}
          </ul>
        </div>
      </li>

      <li>
        <form action="{% url 'home' %}" method="get" class="flex items-center justify-center">
          <input type="text" name="search" placeholder="Search games..." class="p-2 rounded text-black">
        </form>
      </li>
      

      <li><a href="{% url 'view_orders' %}" class="flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" height="20" width="25"
            viewBox="0 0 640 512">
            <path fill="#ffffff"
              d="M48 0C21.5 0 0 21.5 0 48L0 368c0 26.5 21.5 48 48 48l16 0c0 53 43 96 96 96s96-43 96-96l128 0c0 53 43 96 96 96s96-43 96-96l32 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l0-64 0-32 0-18.7c0-17-6.7-33.3-18.7-45.3L512 114.7c-12-12-28.3-18.7-45.3-18.7L416 96l0-48c0-26.5-21.5-48-48-48L48 0zM416 160l50.7 0L544 237.3l0 18.7-128 0 0-96zM112 416a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zm368-48a48 48 0 1 1 0 96 48 48 0 1 1 0-96z" />
          </svg> Orders</a>
      </li>


     <li class="relative">
  <a href="{% url 'view_cart' %}" class="flex items-center gap-2 relative">
    <!-- Cart SVG Icon -->
    <svg xmlns="http://www.w3.org/2000/svg" height="20" width="22.5" viewBox="0 0 576 512">
      <path fill="#ffffff"
        d="M0 24C0 10.7 10.7 0 24 0L69.5 0c22 0 41.5 12.8 50.6 32l411 0c26.3 0 45.5 25 38.6 50.4l-41 152.3c-8.5 31.4-37 53.3-69.5 53.3l-288.5 0 5.4 28.5c2.2 11.3 12.1 19.5 23.6 19.5L488 336c13.3 0 24 10.7 24 24s-10.7 24-24 24l-288.3 0c-34.6 0-64.3-24.6-70.7-58.5L77.4 54.5c-.7-3.8-4-6.5-7.9-6.5L24 48C10.7 48 0 37.3 0 24zM128 464a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zm336-48a48 48 0 1 1 0 96 48 48 0 1 1 0-96z" />
    </svg>
    Cart

    {% if items > 0 %}
    <span class="absolute -top-3 -left-4 bg-red-600 text-white text-xs px-2 py-0.5 rounded-full">
      {{ items }}
    </span>
    {% endif %}
  </a>
</li>

          {% if user.is_authenticated %}
           <div class="relative group inline-block text-white">
  <!-- Name container -->
  <div class="italic font-bold px-4 py-2 bg-gray-800 rounded-t cursor-pointer flex gap-2">
    <h4>{{ user.first_name }}</h4>
    <h4>{{ user.last_name }}</h4>
    <h4>{{user.games_ordered}}</h4>
  </div>

  <!-- Logout box -->
  <div class="absolute hidden group-hover:flex flex-col right-0 w-42 bg-white text-black shadow-lg rounded-b p-2 z-50">
    
    <a href="{% url 'accaunt' %}" class="px-2 py-1 hover:bg-gray-200 rounded block flex items-center gap-2">
      <!-- Account SVG Icon -->
    <svg xmlns="http://www.w3.org/2000/svg" height="20" width="20" viewBox="0 0 640 640"><path d="M320 312C386.3 312 440 258.3 440 192C440 125.7 386.3 72 320 72C253.7 72 200 125.7 200 192C200 258.3 253.7 312 320 312zM290.3 368C191.8 368 112 447.8 112 546.3C112 562.7 125.3 576 141.7 576L498.3 576C514.7 576 528 562.7 528 546.3C528 447.8 448.2 368 349.7 368L290.3 368z"/></svg>Account
  </a>
    <a href="{% url 'rewards' %}" class="px-2 py-1 hover:bg-gray-200 rounded block flex items-center gap-2">
      <svg xmlns="http://www.w3.org/2000/svg" height="20" width="20" viewBox="0 0 640 640"><!--!Font Awesome Free v7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M385.5 132.8C393.1 119.9 406.9 112 421.8 112L424 112C446.1 112 464 129.9 464 152C464 174.1 446.1 192 424 192L350.7 192L385.5 132.8zM254.5 132.8L289.3 192L216 192C193.9 192 176 174.1 176 152C176 129.9 193.9 112 216 112L218.2 112C233.1 112 247 119.9 254.5 132.8zM344.1 108.5L320 149.5L295.9 108.5C279.7 80.9 250.1 64 218.2 64L216 64C167.4 64 128 103.4 128 152C128 166.4 131.5 180 137.6 192L96 192C78.3 192 64 206.3 64 224L64 256C64 273.7 78.3 288 96 288L544 288C561.7 288 576 273.7 576 256L576 224C576 206.3 561.7 192 544 192L502.4 192C508.5 180 512 166.4 512 152C512 103.4 472.6 64 424 64L421.8 64C389.9 64 360.3 80.9 344.1 108.4zM544 336L344 336L344 544L480 544C515.3 544 544 515.3 544 480L544 336zM296 336L96 336L96 480C96 515.3 124.7 544 160 544L296 544L296 336z"/></svg>Rewards
      </a>
    <form method="POST" action="{% url 'logout' %}">
      {% csrf_token %}
      <button type="submit" class="w-full text-left px-2 py-1 hover:bg-gray-200 rounded flex items-center gap-2">Logout<svg xmlns="http://www.w3.org/2000/svg" height="20" width="20" viewBox="0 0 640 640"><!--!Font Awesome Free v7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M224 160C241.7 160 256 145.7 256 128C256 110.3 241.7 96 224 96L160 96C107 96 64 139 64 192L64 448C64 501 107 544 160 544L224 544C241.7 544 256 529.7 256 512C256 494.3 241.7 480 224 480L160 480C142.3 480 128 465.7 128 448L128 192C128 174.3 142.3 160 160 160L224 160zM566.6 342.6C579.1 330.1 579.1 309.8 566.6 297.3L438.6 169.3C426.1 156.8 405.8 156.8 393.3 169.3C380.8 181.8 380.8 202.1 393.3 214.6L466.7 288L256 288C238.3 288 224 302.3 224 320C224 337.7 238.3 352 256 352L466.7 352L393.3 425.4C380.8 437.9 380.8 458.2 393.3 470.7C405.8 483.2 426.1 483.2 438.6 470.7L566.6 342.7z"/></svg></button>
    </form>
  </div>
</div>

        {% else %}
      <div class="flex gap-4">
          <li><a href="{%url 'register'%}" class="flex items-center gap-2">Register</a></li>
          /
          <li><a href="{%url 'login'%}" class="flex items-center gap-2">Login</a></li>
    </div>
      {% endif %}
    </ul>
  </nav>
  {% block content %}{% endblock content%}
  <footer class="bg-gray-800 text-white p-4 text-center">
   <div class="flex flex-col items-center text-center p-2 bg-white bg-opacity-80 rounded-lg shadow-md max-w-md mx-auto">
  
  <!-- Title -->
  <h2 class="text-2xl font-bold mb-2 text-indigo-800">Contact Us</h2>
  
  <!-- Description -->
  <p class="text-gray-700 mb-4">
    Have questions or need more information?  
    Reach out to us directly on WhatsApp.
  </p>

  <!-- WhatsApp Button -->
  <a href="https://wa.me/+355693210113?text=Hello%2C%20I%20visited%20your%20site%20and%20want%20more%20info" 
     target="_blank" 
     class="flex items-center gap-2 bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded-lg transition duration-200">
    
    <!-- WhatsApp Icon -->
    <svg height="30px" width="30px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" fill="#FFFFFF">
      <circle style="fill:#25D366;" cx="256" cy="256" r="247.916"></circle>
      <path style="fill:#FFFFFF;" d="M256,429.002c-42.111,0-82.68-15.309-114.262-43.116H82.741l19.904-49.762C89.793,311.573,82.998,283.87,82.998,256c0-95.394,77.608-173.002,173.002-173.002S429.002,160.606,429.002,256 S351.394,429.002,256,429.002z"></path>
    </svg>

    Chat on WhatsApp
  </a>

</div>

</body>

</html>