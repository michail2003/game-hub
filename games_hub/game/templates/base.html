<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* Add a delay when hiding the genres box */
    /* Make sure parent <li> is relative to position dropdown */
    .relative {
      position: relative;
    }

    /* Dropdown styling */
    .genres-box {
      position: absolute;
      left: 50%;
      top: 100%;
      /* right below the parent */
      transform: translateX(-50%) translateY(-10px);
      margin-top: 0.5rem;
      /* mt-2 in Tailwind */
      background-color: white;
      color: black;
      border-radius: 0.5rem;
      /* rounded */
      box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1),
        0 4px 6px -2px rgba(0, 0, 0, 0.05);
      /* shadow-lg */
      padding: 1rem;
      /* p-4 */
      min-width: 10rem;
      /* min-w-40 */
      z-index: 20;
      opacity: 0;
      pointer-events: none;
      visibility: hidden;
      transition:
        opacity 0.3s ease,
        transform 0.3s ease,
        visibility 0.3s ease;
      display: flex;
      flex-direction: column;
    }

    /* Show dropdown on hover or focus */
    .group:hover .genres-box,
    .group:focus-within .genres-box {
      opacity: 1;
      pointer-events: auto;
      visibility: visible;
      transform: translateX(-50%) translateY(0);
    }

    /* List item styles */
    .genres-box ul {
      margin: 0;
      padding: 0;
      list-style: none;
    }

    .genres-box li {
      padding: 0.25rem 0.5rem;
      /* py-1 px-2 */
      color: #4a5568;
      /* Tailwind text-gray-700 */
      border-radius: 0.25rem;
      /* rounded */
      transition: background-color 0.2s ease;
    }

    .genres-box li:hover {
      background-color: #e2e8f0;
      /* Tailwind bg-gray-200 */
    }

    .genres-box a {
      display: block;
      width: 100%;
      height: 100%;
      color: inherit;
      text-decoration: none;
    }
  </style>
</head>

<body>

  <nav class="bg-gray-800 text-white">
    <ul class="flex p-4 justify-evenly gap-4 items-center">
      <li><a href="{% url 'home' %}">
          <h1 class="text-4xl font-bold">Game hub</h1>
        </a></li>

      <li class="relative group">
        <a href="#" class="flex items-center gap-2">
          <svg xmlns="http://www.w3.org/2000/svg" height="20" width="20" viewBox="0 0 512 512" fill="white">
            <path
              d="M40 48C26.7 48 16 58.7 16 72l0 48c0 13.3 10.7 24 24 24l48 0c13.3 0 24-10.7 24-24l0-48c0-13.3-10.7-24-24-24L40 48zM192 64c-17.7 0-32 14.3-32 32s14.3 32 32 32l288 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L192 64zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l288 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-288 0zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l288 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-288 0zM16 232l0 48c0 13.3 10.7 24 24 24l48 0c13.3 0 24-10.7 24-24l0-48c0-13.3-10.7-24-24-24l-48 0c-13.3 0-24 10.7-24 24zM40 368c-13.3 0-24 10.7-24 24l0 48c0 13.3 10.7 24 24 24l48 0c13.3 0 24-10.7 24-24l0-48c0-13.3-10.7-24-24-24l-48 0z" />
          </svg>
          Genres
        </a>

        <div class="genres-box">
          <ul>
            {% for genre in genres %}
            <li><a href="http://127.0.0.1:8000/?genre={{ genre }}">{{ genre }}</a></li>
            {% endfor %}
          </ul>
        </div>
      </li>
      <li>
        <form action="{% url 'home' %}" method="get" class="flex items-center justify-center">
          <input type="text" name="search" placeholder="Search games..." class="p-2 rounded text-black">
        </form>
      </li>
      <li><a href="#" class="flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" height="20" width="25"
            viewBox="0 0 640 512">
            <path fill="#ffffff"
              d="M48 0C21.5 0 0 21.5 0 48L0 368c0 26.5 21.5 48 48 48l16 0c0 53 43 96 96 96s96-43 96-96l128 0c0 53 43 96 96 96s96-43 96-96l32 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l0-64 0-32 0-18.7c0-17-6.7-33.3-18.7-45.3L512 114.7c-12-12-28.3-18.7-45.3-18.7L416 96l0-48c0-26.5-21.5-48-48-48L48 0zM416 160l50.7 0L544 237.3l0 18.7-128 0 0-96zM112 416a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zm368-48a48 48 0 1 1 0 96 48 48 0 1 1 0-96z" />
          </svg> Orders</a></li>
      <li><a href="#" class="flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" height="20" width="22.5"
            viewBox="0 0 576 512">
            <path fill="#ffffff"
              d="M0 24C0 10.7 10.7 0 24 0L69.5 0c22 0 41.5 12.8 50.6 32l411 0c26.3 0 45.5 25 38.6 50.4l-41 152.3c-8.5 31.4-37 53.3-69.5 53.3l-288.5 0 5.4 28.5c2.2 11.3 12.1 19.5 23.6 19.5L488 336c13.3 0 24 10.7 24 24s-10.7 24-24 24l-288.3 0c-34.6 0-64.3-24.6-70.7-58.5L77.4 54.5c-.7-3.8-4-6.5-7.9-6.5L24 48C10.7 48 0 37.3 0 24zM128 464a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zm336-48a48 48 0 1 1 0 96 48 48 0 1 1 0-96z" />
          </svg> Cart</a></li>
          {% if user.is_authenticated %}
           <div class="relative group inline-block text-white">
  <!-- Name container -->
  <div class="italic font-bold px-4 py-2 bg-gray-800 rounded-t cursor-pointer">
    <h4>{{ user.first_name }}</h4>
    <h4>{{ user.last_name }}</h4>
  </div>

  <!-- Logout box -->
  <div class="absolute hidden group-hover:flex flex-col right-0 w-32 bg-white text-black shadow-lg rounded-b p-2 z-50">
    <form method="POST" action="{% url 'logout' %}">
      {% csrf_token %}
      <button type="submit" class="w-full text-left px-2 py-1 hover:bg-gray-200 rounded">Logout</button>
    </form>
  </div>
</div>

        {% else %}
      <div class="flex gap-4">
          <li><a href="{%url 'register'%}" class="flex items-center gap-2">Register</a></li>
          /
          <li><a href="{%url 'login'%}" class="flex items-center gap-2">Login</a></li>
    </div>
      {% endif %}
    </ul>
  </nav>
  {% block content %}{% endblock content%}
</body>

</html>