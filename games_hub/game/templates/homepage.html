{% extends "base.html" %}

{% block content %}
<div class="max-w-7xl mx-auto px-4 py-8">
  <!-- Optional user profile picture -->
  {% if user.profile_picture %}
  <div class="flex justify-center mb-8">
    <img src="{{ user.profile_picture.url }}" alt="Profile Picture" class="w-24 h-24 rounded-full shadow-md object-cover">
  </div>
  {% endif %}

  <!-- Game Cards -->
  <div class="flex flex-wrap justify-center gap-6">
    {% for game in games %}
    <div class="bg-white shadow-lg rounded-2xl w-64 hover:shadow-xl transition duration-300 border border-gray-200">
      <a href="{% url 'game_detail' game.pk %}" class="block">
        <div class="p-4">
          <h2 class="text-lg font-semibold text-gray-800 mb-2">{{ game.title }} <span class="text-sm text-gray-500">({{ game.get_console_display }})</span></h2>
          {% if game.image_url %}
          <img src="{{ game.image_url }}" alt="{{ game.title }}" class="w-full h-40 object-cover rounded-md mb-3">
          {% else %}
          <img src="{{ game.image }}" alt="{{ game.title }}" class="w-full h-40 object-cover rounded-md mb-3">
          {% endif %}
          <p class="text-gray-700 font-medium mb-2">Price: ${{ game.discounted_price|floatformat:2 }}</p>
        </div>
      </a>
      <div class="px-4 pb-4">
        <form method="post" action="{% url 'add_to_cart' game.pk %}">
          {% csrf_token %}
          <button type="submit" class="w-full bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-md transition duration-200">
            Add to Cart
          </button>
        </form>
      </div>
    </div>
    {% endfor %}
  </div>
</div>
{% endblock content %}
